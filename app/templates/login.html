{% extends "base.html" %}

{% block content %}
    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <h3 class="login-title">Login</h3>
            </div>
            <div class="login-body">
                <form method="POST" action="" id="loginForm">
                    {{ form.hidden_tag() }}
                    <div class="login-field">
                        {{ form.email.label(class="login-label") }}
                        {{ form.email(class="login-input", id="email") }}
                        {% for error in form.email.errors %}
                        <div class="login-error">{{ error }}</div>
                        {% endfor %}
                    </div>
                    
                    <div class="login-field">
                        {{ form.password.label(class="login-label") }}
                        <div class="password-group">
                            {{ form.password(class="login-input", id="password") }}
                            <button type="button" class="toggle-password" data-target="password">
                                <i class="fa fa-eye"></i>
                            </button>
                        </div>
                        {% for error in form.password.errors %}
                        <div class="login-error">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="login-actions">
                        <button type="submit" id="submitButton" class="login-button">Login</button>
                    </div>
                </form>
                <div class="login-footer">
                    <p>Don't have an account? <a class="signup-link" href="{{ url_for('signup') }}">Sign up here</a></p>
                </div>
            </div>
        </div>
    </div>   
<script>
document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('loginForm');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const submitButton = document.getElementById('submitButton');

    // Password toggle
    document.querySelectorAll('.toggle-password').forEach(button => {
        button.addEventListener('click', function() {
            const targetInput = document.getElementById(this.dataset.target);
            const icon = this.querySelector('i');
            if(targetInput.type === 'password') {
                targetInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                targetInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });
    });

    function validateForm() {
        return emailInput.value.trim() && passwordInput.value.trim();
    }

    function updateSubmitButton() {
        submitButton.disabled = !validateForm();
    }

    emailInput.addEventListener('input', updateSubmitButton);
    passwordInput.addEventListener('input', updateSubmitButton);

    loginForm.addEventListener('submit', function(e) {
        if(!validateForm()) {
            e.preventDefault();
            alert('Please enter both email and password.');
        }
    });

    updateSubmitButton();
});
</script>
<style>
    
.login-container {
    display: flex;                
    justify-content: center;        
    align-items: center;            
    min-height: 60vh;             
    width: 100%;
    padding: 20px;
    margin: 0 auto;
}

.login-card {
    background-color: #fff;
    border-radius: 20px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    padding: 30px;
    text-align: center;
    animation: fadeIn 1s ease;
    max-width: 400px;
    width: 100%;
}
.login-title {
    font-size: 1.8rem;
    color: #1e88e5;
    margin-bottom: 25px;
}
.login-field {
    margin-bottom: 20px;
    text-align: left;
}

.login-label {
    display: block;
    margin-bottom: 5px;
    color: #0d47a1;
    font-weight: 500;
}
.login-input:focus {
    border-color: #1e88e5;
    box-shadow: 0 0 8px rgba(30,136,229,0.3);
}
.login-input {
    width: 100%;   
    box-sizing: border-box; 
    padding: 12px 15px;
    border-radius: 10px;
    border: 1px solid #ccc;
    outline: none;
    font-size: 1rem;
    transition: all 0.3s ease;
}
.password-group {
    position: relative;
    width: 100%;     
}

.password-group .login-input {
    width: 100%;     
    padding-right: 40px; 
}

.password-group .toggle-password {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: transparent;
    border: none;
    cursor: pointer;
    color: #1e88e5;
    font-size: 1.1rem;
}

.password-group .toggle-password:hover {
    color: #1565c0;
}

.login-error {
    background-color: #f44336;
    color: #fff;
    font-size: 0.9rem;
    margin-top: 8px;
    padding: 10px 15px;
    border-radius: 8px;
    font-weight: 500;
    position: relative;
}

.login-error::before {
    content: '';
    position: absolute;
    top: -5px;
    left: 20px;
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 5px solid #f44336;
}

.login-button {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 50px;
    background-color: #1e88e5;
    color: #fff;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.login-button:hover {
    background-color: #1565c0;
}

.login-button:disabled {
    background-color: #90caf9;
    cursor: not-allowed;
}

.login-footer {
    margin-top: 20px;
    text-align: center;
}

.signup-link {
    color: #1e88e5;
    text-decoration: none;
}

.signup-link:hover {
    text-decoration: underline;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

@media (max-width: 500px) {
    .login-card {
        padding: 20px;
    }

    .login-title {
        font-size: 1.5rem;
    }
}

</style>
{% endblock %}